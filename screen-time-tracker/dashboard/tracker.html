<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Screen Time Dashboard</title>
    <link rel="stylesheet" href="tracker.css">
    <link rel="icon" href="../icons/icon-128.png" type="image/svg+xml">
</head>
<body>
    <div class="main-container">
        <button id="settings-button" title="Settings">⚙️</button>
        <div class="panel" id="panel-daily">
            <div class="panel-header-tabs">
                <button id="prev-week" class="week-nav-button">‹</button>
                <div id="date-navigation" class="date-nav">
                </div>
                <button id="next-week" class="week-nav-button">›</button>
            </div>
            <div class="chart-container">
                <canvas id="dailyActivityChart"></canvas>
            </div>
            <div id="website-list">
            </div>
        </div>

        <div class="panel" id="panel-weekly">
            <div class="summary-stats">
                <div class="stat-box">
                    <span>Today</span>
                    <strong id="total-today">--</strong>
                </div>
                <div class="stat-box">
                    <span>This Week</span>
                    <strong id="total-this-week">--</strong>
                </div>
                <div class="stat-box">
                    <span>Daily Average</span>
                    <strong id="average-this-week">--</strong>
                </div>
            </div>
            <div class="chart-container">
                <canvas id="weeklyActivityChart"></canvas>
            </div>
        </div>
    </div>
    <div class="panel" id="panel-history">
        <div id="calendar-container">
            <div id="calendar-header">
                <button id="prev-month" class="month-nav-button">‹</button>
                <h3 id="calendar-month-year">July 2025</h3>
                <button id="next-month" class="month-nav-button">›</button>
            </div>
            <div id="calendar-grid">
            </div>
        </div>
        <div id="data-management-section">
            <h4>Data Management</h4>
            <p>Permanently delete tracking data.</p>
            <div class="button-group">
                <button class="delete-button" data-period="1_year">Clear data over 1 year ago</button>
                <button class="delete-button" data-period="1_month">Clear data over 1 month ago</button>
                <button class="delete-button" data-period="1_week">Clear data over 1 week ago</button>
                <button class="delete-button" data-period="all">Clear ALL data</button>
            </div>
        </div>
    </div>

    <div id="color-modal" class="modal-hidden">
    <div class="modal-content">
        <span class="close-button">&times;</span>
        <div id="modal-website-info">
            <img id="modal-favicon" src="" alt="icon" />
            <h3 id="modal-website-name">domain.com</h3>
        </div>
        <p>Total time this week: <strong id="modal-weekly-total">--</strong></p>
        <p>Total time (all time): <strong id="modal-all-time-total">--</strong></p>

        <div class="modal-section">
            <div class="control-group">
                <label for="time-limit-input">Set daily time limit (minutes):</label>
                <input type="number" id="time-limit-input" min="1">
                <button id="save-limit-button" class="modal-button">Set Limit</button>
            </div>
            <div class="control-group">
                <label for="block-duration-input">Block site for (hours):</label>
                <input type="number" id="block-duration-input" min="1" max="24">
                <button id="block-until-button" class="modal-button">Block</button>
            </div>
        </div>
        <div class="color-picker-wrapper">
            <label for="colorPicker">Set a permanent color:</label>
            <input type="color" id="colorPicker">
            <button id="save-color-button">Save Color</button>
        </div>
    </div>
</div>
    <div id="settings-modal" class="modal-hidden">
        <div class="modal-content">
            <span id="settings-close-button" class="close-button">×</span>
            <h2>Settings</h2>

            <div class="settings-section">
                <h3>Export Data</h3>
                <p>Save a copy of all your tracking data.</p>
                <div class="button-group">
                    <button id="export-copy-button">Copy to Clipboard</button>
                    <button id="export-download-button">Download as File</button>
                </div>
            </div>

            <div class="settings-section">
                <h3>Import Data</h3>
                <p>Merge data from a file or text. This will add to, not replace, existing data.</p>
                <textarea id="import-textarea" placeholder="Paste your exported data here..."></textarea>
                <div class="button-group">
                    <input type="file" id="import-file-input" accept=".json,text/plain" style="display: none;">
                    <label for="import-file-input" class="file-label">Choose a File...</label>
                    <span id="file-name-display">No file selected</span>
                </div>
                <button id="import-data-button">Import Data</button>
            </div>

            <div class="settings-section">
                <h3>Custom Styles</h3>
                <p>Apply custom CSS to the dashboard. Use with caution.</p>
                <textarea id="custom-css-textarea" placeholder=".panel { border-radius: 0; }"></textarea>
                <button id="save-css-button">Apply & Save CSS</button>
            </div>
        </div>
    </div>


    <script src="../lib/chart.umd.js"></script> <script src="../utils/colors.js"></script>
    <script src="tracker.js"></script>
</body>
</html>
